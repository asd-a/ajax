!function($){var $window=$(window),$body=$("body"),$wrapper=$("#wrapper"),$header=$("#header"),$footer=$("#footer"),$main=$("#main"),$main_articles=$main.children("article"),flexboxFixTimeoutId;(breakpoints({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:["361px","480px"],xxsmall:[null,"360px"]}),$window.on("load",(function(){window.setTimeout((function(){$body.removeClass("is-preload")}),100)})),"ie"==browser.name)&&$window.on("resize.flexbox-fix",(function(){clearTimeout(flexboxFixTimeoutId),flexboxFixTimeoutId=setTimeout((function(){$wrapper.prop("scrollHeight")>$window.height()?$wrapper.css("height","auto"):$wrapper.css("height","100vh")}),250)})).triggerHandler("resize.flexbox-fix");var $nav=$header.children("nav"),$nav_li=$nav.find("li");$nav_li.length%2==0&&($nav.addClass("use-middle"),$nav_li.eq($nav_li.length/2).addClass("is-middle"));var delay=325,locked=!1;if($main._show=function(id,initial){var $article=$main_articles.filter("#"+id);if(0!=$article.length){if(locked||void 0!==initial&&!0===initial)return $body.addClass("is-switching"),$body.addClass("is-article-visible"),$main_articles.removeClass("active"),$header.hide(),$footer.hide(),$main.show(),$article.show(),$article.addClass("active"),locked=!1,void setTimeout((function(){$body.removeClass("is-switching")}),initial?1e3:0);if(locked=!0,$body.hasClass("is-article-visible")){var $currentArticle=$main_articles.filter(".active");$currentArticle.removeClass("active"),setTimeout((function(){$currentArticle.hide(),$article.show(),setTimeout((function(){$article.addClass("active"),$window.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout((function(){locked=!1}),325)}),25)}),325)}else $body.addClass("is-article-visible"),setTimeout((function(){$header.hide(),$footer.hide(),$main.show(),$article.show(),setTimeout((function(){$article.addClass("active"),$window.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout((function(){locked=!1}),325)}),25)}),325)}},$main._hide=function(addState){var $article=$main_articles.filter(".active");if($body.hasClass("is-article-visible")){if(void 0!==addState&&!0===addState&&history.pushState(null,null,"#"),locked)return $body.addClass("is-switching"),$article.removeClass("active"),$article.hide(),$main.hide(),$footer.show(),$header.show(),$body.removeClass("is-article-visible"),locked=!1,$body.removeClass("is-switching"),void $window.scrollTop(0).triggerHandler("resize.flexbox-fix");locked=!0,$article.removeClass("active"),setTimeout((function(){$article.hide(),$main.hide(),$footer.show(),$header.show(),setTimeout((function(){$body.removeClass("is-article-visible"),$window.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout((function(){locked=!1}),325)}),25)}),325)}},$main_articles.each((function(){var $this=$(this);$('<div class="close">Close</div>').appendTo($this).on("click",(function(){location.hash=""})),$this.on("click",(function(event){event.stopPropagation()}))})),$body.on("click",(function(event){$body.hasClass("is-article-visible")&&$main._hide(!0)})),$window.on("keyup",(function(event){switch(event.keyCode){case 27:$body.hasClass("is-article-visible")&&$main._hide(!0)}})),$window.on("hashchange",(function(event){""==location.hash||"#"==location.hash?(event.preventDefault(),event.stopPropagation(),$main._hide()):$main_articles.filter(location.hash).length>0&&(event.preventDefault(),event.stopPropagation(),$main._show(location.hash.substr(1)))})),"scrollRestoration"in history)history.scrollRestoration="manual";else{var oldScrollPos=0,scrollPos=0,$htmlbody=$("html,body");$window.on("scroll",(function(){oldScrollPos=scrollPos,scrollPos=$htmlbody.scrollTop()})).on("hashchange",(function(){$window.scrollTop(oldScrollPos)}))}$main.hide(),$main_articles.hide(),""!=location.hash&&"#"!=location.hash&&$window.on("load",(function(){$main._show(location.hash.substr(1),!0)}))}(jQuery);